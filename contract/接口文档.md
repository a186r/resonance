log：

v0.1.5

- 新增**设置当前轮次募资目标**
- 新增**查询所有参与共振的用户地址(只有管理员能调用)**
- 新增**查询单个用户在共振中投入的ETH的总量(只有管理员能调用)**

v0.1.4

- 修改 **结算当前轮次（裂变奖励和幸运奖励）**
- 修改 **获取信仰奖励信息**
- 新增 **结算信仰奖励**
- 新增 **返回下一个区块高度的区块Hash**

v0.1.3

- 新增**查询msg.sender是否是共建者Builder**
- 新增**查询msg.sender是否是募资者Funder**
- 新增**提取所有Token**

v0.1.2

- **结算当前轮次** 接口增加说明
- 更新**查询某轮次Funders**

v0.1.1

- 新增查询接口  **查询某轮次Funder**
- 新增 **结算当前轮次**，**只有管理员能够调用**

v0.1

- 新增  **成为裂变者的接口**(成为裂变者是参与共振的第一步)
- 新增提取所有ETH的接口



## 业务接口

#### 1. 成为裂变者

- 接口名称：toBeFissionPerson

- 请求参数

  | 请求参数 | 参数类型 | 参数说明 |
  | -------- | -------- | -------- |
  | promoter | address  | 推广人   |

- 返回

  日志名称：ToBeFissionPerson

  | 返回参数      | 参数类型 | 参数说明     |
  | ------------- | -------- | ------------ |
  | fissionPerson | address  | 裂变者(用户) |
  | promoter      | address  | 推广人       |

#### 2. 提取所有ETH

- 接口名称：withdrawAllETH

- 请求参数

  无
  
- 返回

  日志名称：WithdrawAllETH

  | 返回参数  | 参数类型 | 参数说明      |
  | --------- | -------- | ------------- |
  | funder    | address  | 投资人地址    |
  | ETHAmount | uint256  | 提取的ETH总量 |

#### 3. 提取所有Token

- 接口名称：withdrawAllToken

- 请求参数：

  无

- 返回

  日志名称：WhihdrawAllToken

  | 返回参数    | 参数类型        | 参数说明                                             |
  | ----------- | --------------- | ---------------------------------------------------- |
  | from        | address         | 发送出token的地址，合约地址(因为是从合约中提取token) |
  | to          | address         | 获得token的地址，msg.sender                          |
  | tokenAmount | 提取的Token数量 | 提取的token数量                                      |

  

#### 4. 结算当前轮次（裂变奖励和幸运奖励）

募资期结束后结算当前轮次的游戏奖励，只有管理员能够调用。

管理员调用此方法之后 ，会先结算奖励，然后结算收款人可提取的ETH余额，然后进入下一轮 currentStep++

- 接口名称：settlementStep

- 请求参数：

  | 请求参数           | 参数类型  | 参数说明           |
  | ------------------ | --------- | ------------------ |
  | _fissionWinnerList | address[] | 裂变奖励获胜者列表 |
  | _LuckyWinnerList   | address[] | 幸运奖励获胜者列表 |
  
- 返回

  返回类型：return

  | 返回参数        | 参数类型 | 参数说明          |
  | --------------- | -------- | ----------------- |
  | crowdsaleClosed | bool     | 已结算的轮次Index |

#### 5. 结算信仰奖励

- 接口名称：settlementFaithReward

- 请求参数：

  | 请求参数         | 参数类型  | 参数说明 |
  | ---------------- | --------- | -------- |
  | _FaithWinnerList | address[] |          |

- 返回

  返回类型：return

  | 返回参数            | 返回类型 | 参数说明             |
  | ------------------- | -------- | -------------------- |
  | faithRewardFinished | bool     | 信仰奖励是否分配结束 |

#### 6. 设置当前轮次募资目标

- 接口名称：setRaiseTarget

- 请求参数：

  | 请求参数     | 参数类型 | 参数说明         |
  | ------------ | -------- | ---------------- |
  | _raiseTarget | uint256  | 当前轮次募资目标 |

- 返回：

  返回参数：

  | 返回参数    | 参数类型 | 参数说明         |
  | ----------- | -------- | ---------------- |
  | stepIndex   | uint256  | 当前轮次数       |
  | raiseTarget | uint256  | 当前轮次募资目标 |

  

## 查询接口

#### 1. 首页

首页需要查询当前轮次组建期开放多少Token，当前轮次募资期已经募得的ETH

- 接口名称：`getCurrentStepFundsInfo()`

- 请求参数

  | 请求参数 | 参数类型 | 参数说明 |
  | -------- | -------- | -------- |
  | 无       |          |          |

- 返回

  日志名称：`FundsInfo()`

  | 返回参数                 | 参数类型  | 参数说明                     |
  | ------------------------ | --------- | ---------------------------- |
  | `currentStepTokenAmount` | `uint256` | 当前组建期开放多少Token      |
  | `currentStepRaisedETH`   | `uint256` | 当前轮次募资期已经募得的以太 |

#### 2. 组建页面

- 接口名称：`getBuildingPerioInfo()`

- 请求参数

  | 请求参数 | 参数类型 | 参数说明 |
  | -------- | -------- | -------- |
  | 无       |          |          |

- 返回

  日志名称：`BuildingPerioInfo`

  | 返回参数               | 参数类型  | 参数说明                          |
  | ---------------------- | --------- | --------------------------------- |
  | `bpCountdown`          | `uint256` | 当前轮次倒计时                    |
  | `remainingToken`       | `uint256` | 当前轮次剩余Token数量             |
  | `personalTokenLimited` | `uint256` | 当前轮次每个地址最多投入多少Token |
  | `totalTokenAmount`     | `uint256` | 总共募资已投入多少Token           |

#### 3. 募资界面

- 接口名称：`getFundingPeriodInfo()`

- 请求参数

  | 请求参数 | 参数类型 | 参数说明 |
  | -------- | -------- | -------- |
  | 无       |          |          |

- 返回

  日志名称：`FundingPeriodInfo`

  | 返回参数          | 参数类型  | 参数说明                  |
  | ----------------- | --------- | ------------------------- |
  | `fpCountdown`     | `uint256` | 当前轮次结束倒计时        |
  | `remainingETH`    | `uint256` | 当前轮次可投入剩余ETH数量 |
  | `rasiedETHAmount` | `uint256` | 总共已投入多少eth         |

#### 4. 奖励部分

##### 1. 获取某轮次裂变奖励信息

- 接口名称：`getFissionRewardInfo(uint256 _stepIndex)`

- 请求参数：

  | 参数名称     | 参数类型  | 参数说明       |
  | ------------ | --------- | -------------- |
  | `_stepIndex` | `uint256` | 第几轮(轮次数) |

- 返回

  日志名称：`FissionRewardInfo`

  | 参数名称              | 参数类型    | 参数说明           |
  | --------------------- | ----------- | ------------------ |
  | `fissionRewardList`   | `address[]` | 裂变奖励获奖者列表 |
  | `fissionRewardAmount` | `uint256[]` | 裂变奖励奖金列表   |

##### 2. 获取FOMO奖励信息

- 接口名称：`getFOMORewardIofo(uint256 _stepIndex)`

- 请求参数：

  | 参数名称     | 参数类型  | 参数说明       |
  | ------------ | --------- | -------------- |
  | `_stepIndex` | `uint256` | 第几轮(轮次数) |

- 返回

  日志名称：`FOMORewardInfo`

  | 参数名称         | 参数类型    | 参数说明           |
  | ---------------- | ----------- | ------------------ |
  | `FOMORewardList` | `address[]` | FOMO奖励获奖者列表 |
  | `FOMORewards`    | `uint256[]` | FOMO奖励奖金列表   |

##### 3. 获取幸运奖励信息

- 接口名称：`getLuckyRewardInfo(uint256 _stepIndex)`

- 请求参数：

  | 参数名称     | 参数类型  | 参数说明       |
  | ------------ | --------- | -------------- |
  | `_stepIndex` | `uint256` | 第几轮(轮次数) |

- 返回

  日志名称：`LuckyRewardInfo`

  | 参数名称          | 参数类型    | 参数说明         |
  | ----------------- | ----------- | ---------------- |
  | `luckyRewardList` | `address[]` | 幸运奖励获奖列表 |
  | `luckyReward`     | `uint256`   | 幸运奖励奖金     |

##### 4. 获取信仰奖励信息

- 接口名称：`getFaithRewardInfo`

- 请求参数：

  无
  
- 返回

  日志名称：`FaithRewardInfo`

  | 参数名称            | 参数类型    | 参数说明         |
  | ------------------- | ----------- | ---------------- |
  | `faithRewardList`   | `address[]` | 信仰奖励获奖列表 |
  | `faithRewardAmount` | `uint256[]` | 信仰奖励奖金列表 |

#### 5. 个人中心界面

这里的数据直接返回一个Array

- 接口名称：`getFunderInfo()`

- 请求参数

- 返回

  日志名称：`FunderInfo`

  | 参数名称          | 参数类型    | 参数说明           |
  | ----------------- | ----------- | ------------------ |
  | `FunderInfoArray` | `uint256[]` | 包含个人信息的数组 |
  
  | ArrayIndex | 参数名称                | 参数类型  | 参数说明            |
  | ---------- | ----------------------- | --------- | ------------------- |
  | `0`        | `totalWithdrawToken`    | `uint256` | 可提取Token总数     |
  | `1`        | `totalWithdrawETH`      | `uint256` | 可提取ETH总数       |
  | `2`        | `inviteesNumber`        | `uint256` | 我的邀请人数        |
  | `3`        | `earnFromAff`           | `uint256` | 邀请所得金额        |
  | `4`        | `totalAmountInBuilding` | `uint256` | 组建期共投资金额    |
  | `5`        | `totalAmountInFunding`  | `uint256` | 募集期共投资ETH数量 |
  | `6`        | `totalLuckyReward`      | `uint256` | 幸运奖励总额        |
  | `7`        | `totalFissionReward`    | `uint256` | 裂变奖励总额        |
  | `8`        | `totalFOMOReward`       | `uint256` | FOMO奖励总额        |
  | `9`        | `totalFaithReward`      | `uint256` | 信仰奖励总额        |

#### 6. 查询某轮次Funders

返回**当前轮次**Funders的 Funders地址数组、组建期投入token数量的数组、募资期投入ETH数量的数组、邀请人数数组、推广所得数组，下标是一一对应的

- 接口名称：`getStepFunders`

- 请求参数

  | 请求参数   | 参数类型 | 参数说明 |
  | ---------- | -------- | -------- |
  | _stepIndex | uint256  | 轮次数   |

- 返回

  日志名称：`StepFunders`

  | 参数名称       | 参数类型  | 参数说明                |
  | -------------- | --------- | ----------------------- |
  | funderAddress  | address[] | Funder地址              |
  | tokenAmount    | uint256[] | 在组建期投入的token数量 |
  | ETHAmount      | uint256[] | 在募资期投入的ETH数量   |
  | funderInvitees | uint256[] | 邀请人数                |
  | earnFromAff    | uint256[] | 推广所得                |
  

#### 7. 查询msg.sender是否是共建者Builder

- 接口名称：isBuilder

- 请求参数：

  无

- 返回

  返回方式：return

  | 返回参数 | 参数类型 | 参数说明           |
  | -------- | -------- | ------------------ |
  | return   | bool     | 调用者是否是共建者 |

#### 8. 查询msg.sender是否是募资者Funder

- 接口名称：isFunder

- 请求参数：

  无

- 返回

  返回方式：return

  | 返回参数 | 参数类型 | 参数说明           |
  | -------- | -------- | ------------------ |
  | return   | bool     | 调用者是否是募资者 |

#### 9. 返回下一个区块高度的区块Hash

- 接口名称：getBlockHash

- 请求参数：

  无

- 返回

  返回方式：return

  | 返回参数 | 参数类型 | 参数说明           |
  | -------- | -------- | ------------------ |
  | return   | bytes32  | 下个高度的区块hash |

#### 10. 查询所有参与共振的用户地址(只有管理员能调用)

- 接口名称：getResonances

- 请求参数：

  无

- 返回

  日志名称：GetResonances

  | 返回参数   | 参数类型  | 参数说明                       |
  | ---------- | --------- | ------------------------------ |
  | resonances | address[] | 参与共振的所有用户数组(未去重) |

#### 11. 查询单个用户在共振中投入的ETH的总量(只有管理员能调用)

- 接口名称：getFunderTotalRaised

- 请求参数：

  | 请求参数 | 参数类型 | 参数说明 |
  | -------- | -------- | -------- |
  | _funder  | address  | 用户地址 |

- 返回

  日志名称：FunderTotalRaised

  | 返回参数            | 参数类型 | 参数说明                     |
  | ------------------- | -------- | ---------------------------- |
  | resonancesRasiedETH | uint256  | _funder在共振中投入的ETH总量 |

  